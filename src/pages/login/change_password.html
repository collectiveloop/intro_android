<ion-header>
  <ion-toolbar>
    <ion-buttons left>
      <ion-navbar></ion-navbar>
    </ion-buttons>
    <ion-title class="section">
      {{'CHANGE_PASSWORD' | translate}}
    </ion-title>
    <ion-buttons end></ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <content class="form-style">
    <ion-row>
      <ion-col offset-4 col-4 class="center logo-main">
        <img class="logo-bigger" src="{{logo}}">
      </ion-col>
    </ion-row>
    <form [formGroup]="changePasswordForm">
      <ion-row>
        <ion-col col-12 class="center">
          <span class="error center" [innerHTML]="errorPasswordForm"></span>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col offset-1 col-10 class="center">
          <span class='black'>{{'INDICATIONS' | translate}}</span>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col offset-1 col-11 class="center">
          <ion-item>
            <ion-icon item-left name="ios-unlock-outline"></ion-icon>
            <ion-input md-input formControlName="old_password" type="password" placeholder="{{'OLD_PASSWORD' | translate}}" (keyup.enter)="handleReset('password')" class="lower-case" #oldPassword></ion-input>
          </ion-item>
          <span class="error" *ngIf="!changePasswordForm.controls.old_password.valid  && (changePasswordForm.controls.old_password.dirty || submitted)">
            {{'INVALID_PASSWORD' | translate}}
          </span>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col offset-1 col-11 class="center">
          <ion-item>
            <ion-icon class="flip-icon" item-left name="ios-lock-outline"></ion-icon>
            <ion-input md-input formControlName="password" type="password" placeholder="{{'NEW_PASSWORD' | translate}}" (keyup.enter)="handleReset('confirmPassword')" #password></ion-input>
          </ion-item>
          <span class="error" *ngIf="!changePasswordForm.controls.password.valid  && (changePasswordForm.controls.password.dirty || (submitted && !externalLogin))">
            {{'INVALID_PASSWORD' | translate}}
          </span>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col offset-1 col-11 class="center">
          <ion-item>
            <ion-icon class="flip-icon" item-left name="ios-lock-outline"></ion-icon>
            <ion-input md-input formControlName="confirm_password" type="password" placeholder="{{'CONFIRM_PASSWORD' | translate}}" #confirmPassword (keyup.enter)="submitForm()"></ion-input>
          </ion-item>
          <span class="error" *ngIf="!changePasswordForm.controls.confirm_password.valid  && (changePasswordForm.controls.confirm_password.dirty || submitted)">
            {{'INVALID_CONFIRM_PASSWORD' | translate}}
          </span>
        </ion-col>
      </ion-row>
      <ion-row class="form-container-buttons">
        <ion-col col-12 class="center">
          <button type="button" outline  ion-button class="button-form shadow" (click)="sendRequest()" [disabled]="!changePasswordForm.valid || submitted">{{'CHANGE' | translate}}</button>
        </ion-col>
      </ion-row>
    </form>
  </content>
</ion-content>
